# Lines configured by zsh-newuser-install
HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000
unsetopt autocd
bindkey -v
# End of lines configured by zsh-newuser-install



# SSH AGENT
. ~/.ssh-agent.plugin.zsh



# NVM
export NVM_LAZY_LOAD=true
export NVM_AUTO_USE=true



# PLUGINS
source <(antibody init)
antibody bundle lukechilds/zsh-nvm
antibody bundle rupa/z
antibody bundle starcraftman/zsh-git-prompt
antibody bundle zsh-users/zsh-autosuggestions
antibody bundle zsh-users/zsh-completions
antibody bundle zsh-users/zsh-syntax-highlighting


# VIM MODE CURSOR
function zle-keymap-select {
  case $KEYMAP in
    vicmd)
      print -n -- "\e[1 q" ;;
    main|viins)
      print -n -- "\e[5 q" ;;
  esac

  zle reset-prompt
}
zle -N zle-keymap-select



# GIT PROMPT
ZSH_THEME_GIT_PROMPT_PREFIX="  "
ZSH_THEME_GIT_PROMPT_SUFFIX=""
ZSH_THEME_GIT_PROMPT_HASH_PREFIX=":"
ZSH_THEME_GIT_PROMPT_SEPARATOR=" "
ZSH_THEME_GIT_PROMPT_BRANCH="%{$fg[cyan]%}"
ZSH_THEME_GIT_PROMPT_STAGED="%{$fg[green]%}%{●%G%}"
ZSH_THEME_GIT_PROMPT_CONFLICTS=" %{$fg[red]%}%{✖%G%}"
ZSH_THEME_GIT_PROMPT_CHANGED=" %{$fg[blue]%}%{✚%G%}"
ZSH_THEME_GIT_PROMPT_BEHIND="%{↓·%2G%}"
ZSH_THEME_GIT_PROMPT_AHEAD=" %{↑·%2G%}"
ZSH_THEME_GIT_PROMPT_STASHED=" %{$fg_bold[blue]%}%{⚑%G%}"
ZSH_THEME_GIT_PROMPT_UNTRACKED=" %{$fg[cyan]%}%{…%G%}"
ZSH_THEME_GIT_PROMPT_CLEAN="%{$fg_bold[green]%}%{✔%G%}"
ZSH_THEME_GIT_PROMPT_LOCAL=" L"
ZSH_THEME_GIT_PROMPT_UPSTREAM_FRONT=" {%{$fg_bold[blue]%}"
ZSH_THEME_GIT_PROMPT_UPSTREAM_END="%{${reset_color}%}}"

PROMPT=$'\n''%F{blue}# %1~%f $(git_super_status)'$'\n''$ '



# SHELL COMPLETIONS
autoload -Uz compinit
# https://carlosbecker.com/posts/speeding-up-zsh/
if [ $(date +'%j') != $(stat -f '%Sm' -t '%j' ~/.zcompdump) ]; then
  compinit
else
  compinit -C
fi



# ALIASES
alias t="task"
alias top="htop"
alias v="vim"
alias x="tmuxinator"
alias l='gls --group-directories-first --color=auto -la'

# SUFFIX ALIASES
alias -s {js,jsx,ts,tsx,json,css,scss,md}=code

# GIT ALIASES
alias g="git"
alias gbr="git branch"
alias gch="git checkout"
alias gbrd='git branch --delete'
alias gbrD='git branch --delete --force'
# Remove branches that have already been merged with main.
# a.k.a. ‘delete merged’
alias gbrdm="git branch --merged | grep -v '\\*' | xargs -n 1 git branch -d"
alias gbrr='git branch --remotes'
alias gcm='git commit --verbose'
alias gcmm='git commit --verbose --message'
alias gcma='git commit --amend'
alias gcman='git commit --amend --no-edit'
alias gch='git checkout'
alias gchb='git checkout -b'
alias gcp='git cherry-pick'
alias gcpa='git cherry-pick --abort'
alias gcpc='git cherry-pick --continue'
alias gfe='git fetch'
# Find commits by commit message
alias gfm="!f() { git log --pretty=format:'%C(dim blue)%h%Creset %C(bold blue)%cd%Creset %C(yellow)%d%Creset %s %C(bold blue)%an%Creset' --decorate --date=short --grep=$1; }; f"
alias gl='git l'
alias gpl='git pull'
alias gplr='git pull --rebase'
alias gps='git push'
alias gpsf='git push --force-with-lease'
alias gpsu='git push -u'
alias grb='git rebase'
alias grba='git rebase --abort'
alias grbc='git rebase --continue'
alias grbi='git rebase --interactive'
alias grs='git reset'
alias gsh='git stash'
alias gshc='git stash clear'
alias gshl='git stash list'
alias gshp='git stash pop'
alias gst='git status --short --branch'



# DIRCOLORS
export CLICOLOR=YES



# NOTHING SHOWN ON RIGHT PROMPT
RPS1=''


# make sure user installed binaries override system's
export PATH=/usr/local/bin:$PATH

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize
